<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dino Game</title>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #87ceeb;
      overflow: hidden;
      font-family: Arial, sans-serif;
      flex-direction: column;
    }
    #menu {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    #menu h1 {
      font-size: 36px;
      color: #333;
      margin-bottom: 20px;
    }
    .difficulty-button {
      padding: 15px 30px;
      font-size: 20px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #333;
      color: white;
      transition: 0.3s;
    }
    .difficulty-button:hover {
      background-color: #555;
    }
    #gameCanvas {
      display: none;
      background-color: #fff;
      border: 2px solid #333;
    }
    #score {
      display: none;
      position: absolute;
      top: 20px;
      left: 20px;
      font-family: 'Arial', sans-serif;
      font-size: 24px;
      color: black;
    }
    .jump-button {
      padding: 20px;
      font-size: 24px;
      border: none;
      border-radius: 50%;
      background-color: #333;
      color: white;
      cursor: pointer;
      margin: 10px;
    }
    .jump-button:active {
      background-color: #555;
    }
    .button-container {
      display: flex;
      justify-content: center;
      position: absolute;
      bottom: 30px;
      width: 100%;
    }
  </style>
</head>
<body>
  <!-- Menu -->
  <div id="menu">
    <h1>Pilih Tingkat Kesulitan</h1>
    <button class="difficulty-button" onclick="startGame('mudah')">Mudah</button>
    <button class="difficulty-button" onclick="startGame('sedang')">Sedang</button>
    <button class="difficulty-button" onclick="startGame('susah')">Susah</button>
  </div>

  <!-- Game -->
  <canvas id="gameCanvas" width="600" height="150"></canvas>
  <div id="score">Score: 0</div>

  <div class="button-container" style="display: none;" id="jumpButtons">
    <button class="jump-button" id="shortJumpButton">Lompat Pendek</button>
    <button class="jump-button" id="longJumpButton">Lompat Jauh</button>
  </div>

  <script>
    const menu = document.getElementById('menu');
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');
    const jumpButtons = document.getElementById('jumpButtons');
    let score = 0;
    let gameOver = false;
    let obstacles = [];
    let ball = { x: 50, y: 100, radius: 10, dy: 0, gravity: 0.5, jumpPower: -10, ground: 130, isJumping: false };
    let obstacleSpeed, obstacleFrequency;

    function startGame(difficulty) {
      // Set difficulty
      if (difficulty === 'mudah') {
        obstacleSpeed = 3;
        obstacleFrequency = 0.01;
      } else if (difficulty === 'sedang') {
        obstacleSpeed = 5;
        obstacleFrequency = 0.02;
      } else if (difficulty === 'susah') {
        obstacleSpeed = 7;
        obstacleFrequency = 0.03;
      }

      // Hide menu and show game
      menu.style.display = 'none';
      canvas.style.display = 'block';
      scoreDisplay.style.display = 'block';
      jumpButtons.style.display = 'flex';

      // Start game loop
      gameLoop();
    }

    function drawBall() {
      ctx.beginPath();
      ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
      ctx.fillStyle = "#333";
      ctx.fill();
      ctx.closePath();
    }

    function drawObstacles() {
      ctx.fillStyle = "#228B22";
      obstacles.forEach(obstacle => {
        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
        obstacle.x -= obstacleSpeed;
      });
      obstacles = obstacles.filter(obstacle => obstacle.x + obstacle.width > 0);
    }

    function generateObstacles() {
      if (Math.random() < obstacleFrequency) {
        const obstacleHeight = Math.random() * (40 - 20) + 40;
        obstacles.push({ x: canvas.width, y: ball.ground - obstacleHeight, width: 20, height: obstacleHeight });
      }
    }

    function checkCollision() {
      obstacles.forEach(obstacle => {
        if (ball.x + ball.radius > obstacle.x &&
            ball.x - ball.radius < obstacle.x + obstacle.width &&
            ball.y + ball.radius > obstacle.y) {
          gameOver = true;
          alert(`Game Over! Your score: ${score}`);
          location.reload();
        }
      });
    }

    function updateGame() {
      if (gameOver) return;

      // Update ball position
      ball.dy += ball.gravity; // Apply gravity
      ball.y += ball.dy;

      if (ball.y > ball.ground) {
        ball.y = ball.ground;
        ball.dy = 0;
        ball.isJumping = false;
      }

      // Generate obstacles
      generateObstacles();

      // Check for collision
      checkCollision();

      // Update score
      score++;
      scoreDisplay.innerText = `Score: ${score}`;

      // Clear canvas and redraw
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#87ceeb"; // Sky
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = "#8B4513"; // Ground
      ctx.fillRect(0, ball.ground, canvas.width, canvas.height - ball.ground);
      drawBall();
      drawObstacles();
    }

    function jump(shortJump) {
      if (!ball.isJumping && ball.y === ball.ground) {
        ball.dy = shortJump ? -12 : ball.jumpPower;  // Short jump is less power
        ball.isJumping = true;
      }
    }

    // Event listener for jump buttons
    document.getElementById('shortJumpButton').addEventListener('click', () => jump(true));
    document.getElementById('longJumpButton').addEventListener('click', () => jump(false));

    // Game loop
    function gameLoop() {
      updateGame();
      if (!gameOver) {
        requestAnimationFrame(gameLoop);
      }
    }
  </script>
</body>
</html>